#!/bin/sh

if [ $# -eq 0 ]; then
  echo "usage: $0 exercise-slug"
  exit 1
fi

dir=$1

cd $dir

status=0

cat .meta/solution.d *.d > .meta/tmp.d
if ! dub -b unittest --single .meta/tmp.d ; then
  echo "$dir test has failed"
  status=1
fi

rm .meta/tmp.d

exit $status
